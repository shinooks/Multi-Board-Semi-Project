<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rich Text Editor with TinyMCE</title>
  <!-- TinyMCE 스크립트 추가 -->
  <script src="https://cdn.tiny.cloud/1/q2jviy25d7q4zr6k8kqdx0hyly6kh2ged8lz76v25bful25f/tinymce/7/tinymce.min.js" referrerpolicy="origin"></script>
</head>
<body>
  <h1>게시판 글 작성</h1>

  <!-- 글 제목 -->
  <input type="text" id="title" placeholder="글 제목" style="width: 100%; padding: 10px; margin-bottom: 20px;" />

  <!-- TinyMCE 에디터 -->
  <textarea id="editor"></textarea>

  <!-- 게시 버튼 -->
  <button id="submit" style="margin-top: 20px; padding: 10px 20px; font-size: 16px;">게시하기</button>

  <script>
    tinymce.init({
      selector: '#editor',
      debug: true,
      menubar: false,
      plugins: [
        'anchor', 'autolink', 'charmap', 'codesample', 'emoticons', 'image', 'link', 'lists', 'media', 'searchreplace', 'table', 'visualblocks', 'wordcount'
      ],
      toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline | link image media table | checklist numlist bullist | alignleft aligncenter alignright | removeformat',
      height: 500,
      branding: false,
      automatic_uploads: true, // 이미지 자동 업로드
      images_upload_url: '/upload-image',
    });

    document.getElementById('submit').addEventListener('click', () => {
      tinymce.activeEditor.uploadImages().then(() => {
        const title = document.getElementById('title').value;
        const content = tinymce.activeEditor.getContent();

        if (!title.trim() || !content.trim()) {
          alert('제목과 내용을 모두 입력해주세요!');
          return;
        }

        console.log('제목:', title);
        console.log('내용:', content);
        alert('글이 성공적으로 게시되었습니다!');
      });
    });
  </script>
</body>
</html>
